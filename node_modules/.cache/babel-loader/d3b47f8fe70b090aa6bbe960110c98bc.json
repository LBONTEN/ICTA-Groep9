{"ast":null,"code":"var _jsxFileName = \"/home/cheche/Projects/ICTA-Groep9/src/Components/Upload.js\";\nimport React, { Component } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class Upload extends Component {\n  constructor(props) {\n    super(props);\n\n    this.uploadFile = () => {\n      console.log(\"upload file pressed...\");\n      const fileinput = document.getElementById('fileinput');\n      const count = document.getElementById('countInput').value;\n      let file = fileinput.files[0];\n\n      if (!(file === undefined)) {\n        this.setState({\n          showUrl: true\n        });\n        this.post_get_Handler(file, count);\n      } else {\n        this.setState({\n          showUrl: false\n        });\n      }\n    };\n\n    this.state = {\n      base_url: null,\n      showUrl: false\n    };\n  }\n\n  async post_get_Handler(file) {\n    var fullPath = document.getElementById('fileinput').value;\n\n    if (fullPath) {\n      var startIndex = fullPath.indexOf('\\\\') >= 0 ? fullPath.lastIndexOf('\\\\') : fullPath.lastIndexOf('/');\n      var filename = fullPath.substring(startIndex);\n\n      if (filename.indexOf('\\\\') === 0 || filename.indexOf('/') === 0) {\n        filename = filename.substring(1);\n      } // SEND GET\n\n\n      const response = await fetch(`https://hek46ulrnc.execute-api.us-east-1.amazonaws.com/prod/upload?file=${filename}`);\n      const data = await response.json();\n      this.setState({\n        base_url: data.URL.fields.key\n      }); // POST\n\n      let form = new FormData();\n      Object.keys(data.URL.fields).forEach(key => form.append(key, data.URL.fields[key]));\n      form.append('file', file); //SEND POST\n\n      const post_response = await fetch(data.URL.url, {\n        method: 'POST',\n        body: form\n      });\n\n      if (!post_response.ok) {\n        console.log('Failed to upload via presigned POST');\n      }\n\n      console.log(`File uploaded via presigned POST with key: ${data.URL.fields.key}`);\n    }\n  }\n\n  copyText() {\n    let element = document.getElementById(\"key\");\n    document.execCommand(\"copy\");\n    element.addEventListener(\"copy\", function (event) {\n      event.preventDefault();\n\n      if (event.clipboardData) {\n        event.clipboardData.setData(\"text/plain\", element.textContent);\n      }\n    });\n    let tooltip = document.getElementById(\"copyTooltip\");\n    tooltip.innerHTML = 'Copied to clipboard';\n  }\n\n  changeToolTip() {\n    let tooltip = document.getElementById(\"copyTooltip\");\n    tooltip.innerHTML = \"Copy to clipboard\";\n  }\n\n  changeChosenFile() {\n    let fileinput = document.getElementById(\"fileinput\");\n    let filelabel = document.getElementById(\"filelabel\");\n    filelabel.innerHTML = `Chosen file: ${fileinput.files[0].name}`;\n  }\n\n  resetFile() {\n    let filelabel = document.getElementById(\"filelabel\");\n    filelabel.innerHTML = \"Choose file\";\n  }\n\n  render() {\n    let url;\n\n    if (this.state.showUrl) {\n      url = /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"tooltip\",\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          onClick: this.copyText,\n          onMouseOut: this.changeToolTip,\n          id: \"key\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            class: \"tooltipText\",\n            id: \"copyTooltip\",\n            children: \"Copy to clipboard\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 17\n          }, this), this.state.base_url]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"form\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"field\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"File: \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            class: \"custom-input file-input input-button hoverable\",\n            for: \"fileinput\",\n            id: \"filelabel\",\n            children: \"Choose file\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            name: \"file\",\n            id: \"fileinput\",\n            onChange: this.changeChosenFile\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"count\",\n            children: \"Count:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"count\",\n            id: \"countInput\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"button\",\n          value: \"Upload\",\n          class: \"input-button hoverable\",\n          onClick: this.uploadFile\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"reset\",\n          value: \"Reset the file\",\n          class: \"input-button hoverable\",\n          onClick: this.resetFile\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 17\n      }, this), url]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/home/cheche/Projects/ICTA-Groep9/src/Components/Upload.js"],"names":["React","Component","Upload","constructor","props","uploadFile","console","log","fileinput","document","getElementById","count","value","file","files","undefined","setState","showUrl","post_get_Handler","state","base_url","fullPath","startIndex","indexOf","lastIndexOf","filename","substring","response","fetch","data","json","URL","fields","key","form","FormData","Object","keys","forEach","append","post_response","url","method","body","ok","copyText","element","execCommand","addEventListener","event","preventDefault","clipboardData","setData","textContent","tooltip","innerHTML","changeToolTip","changeChosenFile","filelabel","name","resetFile","render"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\n\nexport default class Upload extends Component {    \n    constructor(props) {\n        super(props);\n        this.state= {\n            base_url: null,\n            showUrl: false,\n        };\n    }\n\n    async post_get_Handler(file) {\n        var fullPath = document.getElementById('fileinput').value;\n        if (fullPath) {\n            var startIndex = (fullPath.indexOf('\\\\') >= 0 ? fullPath.lastIndexOf('\\\\') : fullPath.lastIndexOf('/'));\n            var filename = fullPath.substring(startIndex);\n            if (filename.indexOf('\\\\') === 0 || filename.indexOf('/') === 0) {\n                filename = filename.substring(1);\n            }\n        \n            // SEND GET\n            const response = await fetch(`https://hek46ulrnc.execute-api.us-east-1.amazonaws.com/prod/upload?file=${filename}`);\n            const data = await response.json();\n            \n            this.setState({ base_url: data.URL.fields.key })\n\n            // POST\n            let form = new FormData();\n            Object.keys(data.URL.fields).forEach(key => form.append(key, data.URL.fields[key]));\n            form.append('file', file)\n            \n            //SEND POST\n            const post_response = await fetch(data.URL.url, { method: 'POST', body: form });\n            if (!post_response.ok) {\n                console.log('Failed to upload via presigned POST');\n            }\n            console.log(`File uploaded via presigned POST with key: ${data.URL.fields.key}`);\n        }\n    }\n\n    uploadFile = () => {\n        console.log(\"upload file pressed...\");\n        const fileinput = document.getElementById('fileinput');\n        const count = document.getElementById('countInput').value;\n        let file = fileinput.files[0];\n        if(!(file === undefined)) {\n            this.setState({showUrl: true})\n            this.post_get_Handler(file, count);\n        } else {\n            this.setState({showUrl: false})\n        }\n        \n    }\n\n    copyText() {  \n        let element = document.getElementById(\"key\");\n        document.execCommand(\"copy\");\n        element.addEventListener(\"copy\", function(event) {\n            event.preventDefault();\n            if(event.clipboardData) {\n                event.clipboardData.setData(\"text/plain\", element.textContent);\n            }\n        });\n\n        let tooltip = document.getElementById(\"copyTooltip\");\n        tooltip.innerHTML = 'Copied to clipboard'\n    }\n\n    changeToolTip() {\n        let tooltip = document.getElementById(\"copyTooltip\");\n        tooltip.innerHTML = \"Copy to clipboard\";\n    }\n\n    changeChosenFile() {\n        let fileinput = document.getElementById(\"fileinput\");\n        let filelabel = document.getElementById(\"filelabel\");\n        filelabel.innerHTML = `Chosen file: ${fileinput.files[0].name}`;\n    }\n\n    resetFile() {\n        let filelabel = document.getElementById(\"filelabel\");\n        filelabel.innerHTML = \"Choose file\";\n    }\n\n    render() {\n        let url;\n        if(this.state.showUrl)\n        {\n        url = \n        <div class=\"tooltip\">\n            <h1 onClick={this.copyText} onMouseOut={this.changeToolTip} id=\"key\">\n                <span class=\"tooltipText\" id=\"copyTooltip\">Copy to clipboard</span>\n                {this.state.base_url}\n            </h1>\n        </div>\n        }\n        return(\n            <div>\n                <form>\n                    <div className=\"field\">\n                        <label>File: </label>\n                        <label class=\"custom-input file-input input-button hoverable\" for=\"fileinput\" id=\"filelabel\">Choose file</label>\n                        <input type=\"file\" name=\"file\" id=\"fileinput\" onChange={this.changeChosenFile}/>\n                        <label htmlFor=\"count\">Count:</label>\n                        <input type=\"text\" name=\"count\" id=\"countInput\"/>\n                    </div>\n                    <input type=\"button\" value=\"Upload\" class=\"input-button hoverable\" onClick={this.uploadFile} />\n                    <input type=\"reset\" value=\"Reset the file\" class=\"input-button hoverable\" onClick={this.resetFile} />\n                </form>\n                {url}\n        </div>\n        );\n    }\n}"]},"metadata":{},"sourceType":"module"}